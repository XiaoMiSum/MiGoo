name: 测试步骤
config:
  request:
    api: /api/login
dataset:
  vars:
    user: migoo
cases:
  - title: 单个测试步骤
    steps:
      - url: /api/login
        method: post
        body:
          userName: ${user}
          password: ${password}
          sign: ${sign}
        extract:
          json:
            status: '$.status'
    body:
      userName: ${status}
      password: ${password}
      sign: ${sign}
    validators:
      - { assertion: response, field: status, expected: 200, rule: == }
  - title: 多个测试步骤
    steps: './case/teststep.yml'
    body:
      userName: ${code1}
      password: ${code2}
      sign: ${sign}
    validators:
      - { assertion: response, field: status, expected: 200, rule: == }
  - title: sql步骤
    steps:
      - datasource: datasource1
        statement: 'select * from users;'
        extract:
          json:
            username: '$[0].user_name'
    body:
      userName: ${username}
      password: ${password}
      sign: ${sign}
    validators:
      - { assertion: response, field: status, expected: 200, rule: == }
